function doSubmit(){var e=document.getElementById("item_name").value;if(""==e)return alert("\u8bf7\u8f93\u5165\u7269\u54c1\u540d\u79f0"),!1;var n=document.getElementById("media_ids");return n.value=images.serverId,images.localId=[],images.serverId=[],!0}function appendPreviewImg(e){img=document.createElement("img"),img.setAttribute("class","th"),img.src=e,img.width=64,img.height=64,document.getElementById("preview_image").appendChild(img)}var images={localId:[],serverId:[]};wx.ready(function(){document.getElementById("scan_qrcode").onclick=function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){var n=e.resultStr;console.info(n)}})},document.getElementById("upload_image").onclick=function(){wx.chooseImage({success:function(e){function n(){var a=e.localIds[t];wx.uploadImage({localId:a,success:function(e){images.serverId.push(e.serverId),appendPreviewImg(a),t++,i>t&&n()},fail:function(e){alert(JSON.stringify(e))}})}images.localId=e.localIds;var t=0,i=e.localIds.length;n()}})}}),wx.error(function(e){alert(e.errMsg)});